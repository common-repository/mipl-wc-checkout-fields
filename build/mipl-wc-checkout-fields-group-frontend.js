(()=>{"use strict";var e,t={787:()=>{const e=window.wc.blocksCheckout,t=window.React,l=(window.wp.i18n,window.wp.element),a=window.wp.data,n=window.wp.components,r=window.wc.blocksComponents,c=({className:e,field:a,onChange:n,value:r})=>{""!=r&&void 0!==r||(r=[]);const[c,o]=(0,l.useState)(r),[i,s]=(0,l.useState)(0);(0,l.useEffect)((()=>{0!=i&&n(c)}),[c,i]);let m="wc-block-components-text-input is-active "+e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:m},(0,t.createElement)("input",{name:a.field_name,type:"date",value:r,onChange:e=>(e=>{o(e.target.value),s(i+1)})(e)}),(0,t.createElement)("label",null,a.field_label)))},o=({className:e,field:a,onChange:n,value:r})=>{""!=r&&void 0!==r||(r=[]);const[c,o]=(0,l.useState)(r),[i,s]=(0,l.useState)(0);(0,l.useEffect)((()=>{0!=i&&n(c)}),[c,i]);let m="wc-block-components-text-input is-active "+e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:m},(0,t.createElement)("input",{name:a.field_name,type:"time",value:r,onChange:e=>(e=>{o(e.target.value),s(i+1)})(e)}),(0,t.createElement)("label",null,a.field_label)))},i=({className:e,field:a,onChange:n,value:r})=>{""!=r&&void 0!==r||(r=[]);const[c,o]=(0,l.useState)(r),[i,s]=(0,l.useState)(0);(0,l.useEffect)((()=>{0!=i&&n(c)}),[c,i]);let m="wc-block-components-text-input is-active "+e;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:m},(0,t.createElement)("input",{name:a.field_name,type:"datetime-local",value:r,onChange:e=>(e=>{o(e.target.value),s(i+1)})(e)}),(0,t.createElement)("label",null,a.field_label)))},s=({field:e,onChange:a,value:n})=>{""!=n&&void 0!==n||(n=[]);const[r,c]=(0,l.useState)(n),[o,i]=(0,l.useState)(0);return(0,l.useEffect)((()=>{0!=o&&a(r)}),[r,o]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{class:"mipl-block-components-color"},(0,t.createElement)("label",null,e.field_label),(0,t.createElement)("input",{name:e.field_name,type:"color",value:n,onChange:e=>(e=>{c(e.target.value),i(o+1)})(e)})))},m=({className:e,field:a,onChange:n,value:r})=>{const[c,o]=(0,l.useState)(""),[i,s]=(0,l.useState)(r);let m="",d=!1;if(void 0!==r&&""!=r){d=null!=r.match(/\.(jpeg|jpg|png)$/);var u=r.match(/\/([^\/?#]+)[^\/]*$/);u.length>1&&(m=u[1])}var _=a.file_type.toString();return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:e},(0,t.createElement)("label",null,a.field_label),(0,t.createElement)("input",{type:"file",name:a.field_name,accept:_,onChange:e=>{(e=>{let t=e.target.files[0];var l=new FormData;if(l.append("mipl_wc_file",t),o(""),s(""),1048576*parseInt(a.file_size)<t.size){var r="File size must be less then "+a.file_size+"MB";return o(r),!1}if(!a.file_type.includes(t.type))return o("File type should be valid!"),!1;const c=MIPL_WC_CF_REST_ROUTE+"/upload_file_data";fetch(c,{method:"POST",body:l}).then((e=>e.json())).then((e=>{o(e.message),s(e.file_url),n(e.file_url)})).catch((e=>{console.error(e)}))})(e)}})),d&&(0,t.createElement)("div",null,(0,t.createElement)("img",{src:r,width:"200px",height:"70px"})),!d&&m.length>0&&(0,t.createElement)("div",{className:"mipl_wc_file_name"},"File Name: ",m),(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_file"},c)))},d=({field:e,onChange:a,fld_value:n})=>{""!=n&&void 0!==n||(n=[]);const[r,c]=(0,l.useState)(n),[o,i]=(0,l.useState)(0);return(0,l.useEffect)((()=>{0!=o&&a(r)}),[o]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",null,e.field_label,e.option_value.map((l=>{let a="";return n.length>0&&n.includes(l.value)&&(a="checked"),(0,t.createElement)("div",null,(0,t.createElement)("label",null,(0,t.createElement)("input",{name:e.field_name,type:"checkbox",value:l.value,checked:a,onChange:e=>(e=>{if(e.target.checked)c([...n,e.target.value]);else{var t=n.filter((function(t){return t!==e.target.value}));c(t)}i(o+1)})(e)}),l.label))}))))};function u({group_id:e,field:l,callBack:u,product_qty:_,product_id:p,validation:f,saved_fields_value:v}){return(0,t.createElement)(t.Fragment,null,l.map((l=>{let f=!0,g="",h="",E="mipl_field_"+p+"_"+_+"_"+l.field_name;const{validationError:b,validationErrorId:w}=(0,a.useSelect)((e=>{const t=e("wc/store/validation");return{validationError:t.getValidationError(E),validationErrorId:t.getValidationErrorId(E)}}));void 0===b||b.hidden||(f=!1,g=b.message,h="mipl-wc-has-error");let k="_mipl_wc_cf_"+e+"_"+p+"_"+_+"_"+l.field_name,N=v[k],y="";switch(l.field_type){case"color":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s,{field:l,value:N,onChange:e=>u(e,l,_,p)}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));case"checkbox":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{class:"mipl-wc-block-components-checkbox-input"},(0,t.createElement)(r.CheckboxControl,{label:l.field_label,onChange:e=>u(e,l,_,p),checked:N}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_custom"},g))));case"textarea":return y="mipl-block-components-textarea "+h,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.TextareaControl,{className:y,placeholder:l.field_label,value:N,onChange:e=>{u(e,l,_,p)}}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));case"datetime-local":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i,{className:h,field:l,value:N,onChange:e=>u(e,l,_,p)}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));case"radio":return(0,t.createElement)("div",{class:"mipl-wc-block-components-radio-input"},(0,t.createElement)("label",null,l.field_label,(0,t.createElement)(r.RadioControl,{options:l.option_value,selected:N,onChange:e=>u(e,l,_,p)})),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_custom"},g)));case"file":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{class:"mipl-wc-block-components-file-input wc-block-components-text-input is-active"},(0,t.createElement)(m,{className:h,field:l,value:N,onChange:e=>u(e,l,_,p)})),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_file"},g)));case"multicheckbox":return(0,t.createElement)("div",{className:"mipl-wc-block-components-multicheckbox-input"},(0,t.createElement)(d,{field:l,fld_value:N,onChange:e=>u(e,l,_,p)}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_custom"},g)));case"select":return y="wc-block-components-combobox-control mipl-wc-select "+h,(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"mipl-wc-block-components-select mipl-select-parent"},(0,t.createElement)("div",{className:"wc-block-components-combobox wc-block-components-address-form__state wc-block-components-state-input is-active"},(0,t.createElement)(n.ComboboxControl,{className:y,value:N,label:l.field_label,options:l.option_value,onChange:e=>u(e,l,_,p)}))),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg_custom"},g)));case"date":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c,{className:h,field:l,value:N,onChange:e=>u(e,l,_,p)}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));case"time":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o,{className:h,field:l,value:N,onChange:e=>u(e,l,_,p)}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));case"number":return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.TextInput,{className:h,type:"text",value:N,onChange:e=>u(e,l,_,p),label:l.field_label}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)));default:return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.TextInput,{className:h,type:l.field_type,value:N,onChange:e=>u(e,l,_,p),label:l.field_label}),!f&&(0,t.createElement)("div",{className:"wc-block-components-validation-error",role:"alert"},(0,t.createElement)("p",{className:"mipl_wc_error_msg"},g)))}})))}function _({product_name:e,product_qty:l=""}){var a=function(e=1){let t="th";return 0==e&&(t=""),e%10==1&&e%100!=11&&(t="st"),e%10==2&&e%100!=12&&(t="nd"),e%10==3&&e%100!=13&&(t="rd"),e+t}(l);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("h5",null,a+" "+e))}const p=({showStepNumberTitle:e,group_id:a,callBack:n,validation:c,validation_callback:o,default_value_callback:i,saved_fields_value:s})=>{const m=function(e){const[t,a]=(0,l.useState)("");return(0,l.useEffect)((()=>{!async function(){const t=await fetch(e);if(!t)return;const l=await t.json();a(l)}()}),[e]),t}(MIPL_WC_CF_REST_ROUTE+"/client_cf_data/"+a);let d="",p="",f=new Array;var v=new Array;let g=new Array;var h=[];if(void 0!==a){if(p=m[a],void 0===p)return!1;if(h=p.single_product_data,f=p.fields,f.length<1)return!1;if(Object.entries(p).forEach((([e,t])=>{"group_title"==e&&(d+=t),"products"==e&&t.map((e=>{v[e.id]={product_name:e.product_name,product_qty:e.qty}}))})),0!=v.length)for(var E in v){const e=v[E];if(""!=e.product_qty){const t=[];for(let l=1;l<=parseInt(e.product_qty);l++)t.push(f);g[E]=t}}}const b=[];for(var w in g)b.push(w);let k={};if(null!=sessionStorage.getItem("mipl_ck_fields_group")){let e=JSON.parse(sessionStorage.getItem("mipl_ck_fields_group"));void 0!==e[a]&&(k=e[a])}let N={},y={},C=[];for(let e in g){const t=g[e];for(let l in t){const n=t[l];for(let t in n){const r=n[t];let c="mipl_field_"+e+"_"+(parseInt(l)+1)+"_"+r.field_name,o="",i=!0,m="_mipl_wc_cf_"+a+"_"+e+"_"+(parseInt(l)+1)+"_"+r.field_name;""!=r.required_field&&(o="required");var S="";"yes"!=r.placeholder_checkbox&&(S=r.default_value),"color"==r.field_type&&""==r.default_value&&(S="#000000"),"checkbox"==r.field_type&&(S="yes"==r.default_value?1:""),""!=r.required_field&&""==S&&""==s[m]&&(i=!1),y={label:r.field_label,key:c,type:r.field_type,validation:o,status:i,hidden:i};var x=parseInt(l),F="_mipl_wc_cf_"+a+"_"+e+"_"+(parseInt(l)+1)+"_"+r.field_name,I=parseInt(e);void 0!==h&&void 0!==h[I]&&void 0!==h[I][x]&&void 0!==h[I][x][F]&&(S=h[I][x][F]),void 0!==k[F]&&(S=k[F]),N={...N,[F]:S},C=[...C,y]}}}let O="mipl_custom_fields";return void 0!==e&&(O="mipl_custom_fields hide_form_step_number_title",d=""),i(N),o(C),(0,t.createElement)(t.Fragment,null,b.map((e=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(r.FormStep,{className:O,title:d},g[e].map(((l,r)=>{let o=v[e].product_name,i=r+1;return 0==e&&(o="Common Fields",i=""),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(_,{product_name:o,product_qty:i}),(0,t.createElement)(u,{group_id:a,product_qty:r+1,product_id:e,field:l,callBack:n,validation:c,saved_fields_value:s}))})))))))},f=JSON.parse('{"apiVersion":2,"name":"woocommerce/mipl-wc-checkout-fields-group","version":"2.0.0","title":"MIPL Checkout Fields Group","category":"woocommerce","description":"\'MIPL WC Checkout Fields\' block to show the fields group on Checkout Page","supports":{"html":false,"align":false,"multiple":true,"reusable":true},"attributes":{"showStepNumberTitle":{"type":"boolean","default":true},"fieldsGroupID":{"type":"string"}},"parent":["woocommerce/checkout-fields-block"],"textdomain":"mipl-wc-checkout-fields"}');(0,e.registerCheckoutBlock)({metadata:f,component:({checkoutExtensionData:e,extensions:n,fieldsGroupID:r,showStepNumberTitle:c})=>{if(void 0===r)return!1;const{setExtensionData:o}=e,[i,s]=(0,l.useState)([]),[m,d]=(0,l.useState)({}),[u,_]=(0,l.useState)(0),[f,v]=(0,l.useState)([]),{setValidationErrors:g,clearValidationError:h}=(0,a.useDispatch)("wc/store/validation");return(0,l.useEffect)((()=>{for(let e in f){const t=f[e];t.status?h(t.key):u<1&&g({[t.key]:{message:"Please enter a valid "+t.label,hidden:!0}})}}),[f,u]),(0,l.useEffect)((()=>{o("mipl_ck_fields_group_json",r,i),o("mipl_ck_fields_group",r,m);let e={};null!=sessionStorage.getItem("mipl_ck_fields_group")&&(e=JSON.parse(sessionStorage.getItem("mipl_ck_fields_group"))),0!=Object.keys(m).length&&(e[r]=m),sessionStorage.setItem("mipl_ck_fields_group",JSON.stringify(e))}),[o,m]),(0,t.createElement)(p,{showStepNumberTitle:c,group_id:r,callBack:(e,t,l,a=0)=>{const n={product_id:a,field_data:[{qty:l,fields:{[t.field_name]:e}}]};let c=[...i];if(0==c.length)c=[...c,n];else{const r=c.find((e=>e.product_id===a));if(void 0===r)c=[...c,n];else{const a=r.field_data.find((e=>e.qty===l));void 0===a?r.field_data=[...r.field_data,n.field_data[0]]:a.fields[t.field_name]=e}}s(c),d({...m,["_mipl_wc_cf_"+r+"_"+a+"_"+l+"_"+t.field_name]:e});let o="mipl_field_"+a+"_"+l+"_"+t.field_name;const p=[...f];if(p.length>0){const l=p.find((e=>e.key===o));l.status=(h=e,E=t.field_type,b=l.validation,w=t.option_value,!("required"==b&&"object"==typeof h&&0==h.length||"checkbox"==E&&"required"==b&&"boolean"==typeof h&&0==h||"required"==b&&"string"==typeof h&&""==h.trim()||"email"==E&&""!=h.trim()&&!h.match(/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/)||"tel"==E&&""!=h.trim()&&!h.match(/^[0-9]{10}$/)||"number"==E&&""!=h.trim()&&!h.match(/^[0-9]+$/)||"color"==E&&""!=h.trim()&&!h.match(/^(?:#(?:[A-Fa-f0-9]{3}){1,2}|(?:rgb[(](?:\s*0*(?:\d\d?(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d\d|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*(?:,(?![)])|(?=[)]))){3}|hsl[(]\s*0*(?:[12]?\d{1,2}|3(?:[0-5]\d|60))\s*(?:\s*,\s*0*(?:\d\d?(?:\.\d+)?\s*%|\.\d+\s*%|100(?:\.0*)?\s*%)){2}\s*|(?:rgba[(](?:\s*0*(?:\d\d?(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d\d|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*,){3}|hsla[(]\s*0*(?:[12]?\d{1,2}|3(?:[0-5]\d|60))\s*(?:\s*,\s*0*(?:\d\d?(?:\.\d+)?\s*%|\.\d+\s*%|100(?:\.0*)?\s*%)){2}\s*,)\s*0*(?:\.\d+|1(?:\.0*)?)\s*)[)])$/)||"date"==E&&""!=h.trim()&&!h.match(/^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})$/)||"time"==E&&""!=h.trim()&&!h.match(/^((([0]?[1-9]|1[0-2])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?( )?(AM|am|aM|Am|PM|pm|pM|Pm))|(([0]?[0-9]|1[0-9]|2[0-3])(:|\.)[0-5][0-9]((:|\.)[0-5][0-9])?))$/)||"datetime-local"==E&&""!=h.trim()&&!h.match(/^(000[1-9]|00[1-9]\d|0[1-9]\d\d|100\d|10[1-9]\d|1[1-9]\d{2}|[2-9]\d{3}|[1-9]\d{4}|1\d{5}|2[0-6]\d{4}|27[0-4]\d{3}|275[0-6]\d{2}|2757[0-5]\d|275760)-(0[1-9]|1[012])-(0[1-9]|[12]\d|3[01])T(0\d|1\d|2[0-4]):(0\d|[1-5]\d)(?::(0\d|[1-5]\d))?(?:.(00\d|0[1-9]\d|[1-9]\d{2}))?$/)||"select"==E&&""!=h.trim()&&""!=w&&!w.find((e=>e.value===h)))),l.hidden=!1,v(p)}var h,E,b,w;g({[o]:{message:"Please enter a valid "+t.field_label,hidden:!1}});let k=u;k++,_(k)},validation_callback:e=>{0!==Object.keys(m).length&&0===Object.keys(f).length&&v(e)},validation:f,default_value_callback:e=>{0===Object.keys(m).length&&d(e)},saved_fields_value:m})}})}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,l,n,r)=>{if(!l){var c=1/0;for(m=0;m<e.length;m++){for(var[l,n,r]=e[m],o=!0,i=0;i<l.length;i++)(!1&r||c>=r)&&Object.keys(a.O).every((e=>a.O[e](l[i])))?l.splice(i--,1):(o=!1,r<c&&(c=r));if(o){e.splice(m--,1);var s=n();void 0!==s&&(t=s)}}return t}r=r||0;for(var m=e.length;m>0&&e[m-1][2]>r;m--)e[m]=e[m-1];e[m]=[l,n,r]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={352:0,508:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,r,[c,o,i]=l,s=0;if(c.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var m=i(a)}for(t&&t(l);s<c.length;s++)r=c[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(m)},l=globalThis.webpackChunkmipl_wc_checkout_fields=globalThis.webpackChunkmipl_wc_checkout_fields||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[508],(()=>a(787)));n=a.O(n)})();